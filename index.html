<!DOCTYPE html>
<html lang="en,es">

<head>
    <link rel="icon" href="./favicon.ico">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Karla&family=Roboto&display=swap" rel="stylesheet">
    <title>Diax - Ayuda</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        html,
        body {
            background-color: white;
            color: #203461;
            padding: 0px;
            margin: 0px;
            min-width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-family: 'Karla', sans-serif;
        }

        .columns {
            display: flex;
            flex-direction: row;
        }

        .rows {
            display: flex;
            flex-direction: column;
        }

        .center {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .left {
            display: flex;
            justify-content: flex-start;
        }

        .noselect {
            -webkit-touch-callout: none;
            /* iOS Safari */
            -webkit-user-select: none;
            /* Safari */
            -khtml-user-select: none;
            /* Konqueror HTML */
            -moz-user-select: none;
            /* Old versions of Firefox */
            -ms-user-select: none;
            /* Internet Explorer/Edge */
            user-select: none;
            /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox */
        }

        #ayuda {
            min-width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
        }

        h1 {
            color: white;
            margin: 10px;
            padding: 0px;
            width: fit-content;
            height: fit-content;
            position: absolute;
        }

        h2 {
            color: #203461;
            font-size: 14px;
            margin: 0px;
            padding: 0px;
            width: fit-content;
            height: fit-content;
            margin-bottom: 5px;
            margin-top: 20px;
            padding: 0px;

        }

        #contenedor_busqueda h2 {
            margin-bottom: 0px;
            margin-top: 0px;
            margin-right: 10px;
        }

        #prioridad_row>div>h2 {
            margin: auto;

        }

        #espacio_slide {
            width: 100%;
            height: 100%;
        }

        #prioridad_row {
            margin-top: 20px;
            display: flex;
        }

        .descripciones {
            color: #203461;
            font-size: 18px;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .instrucciones {
            margin-bottom: 0px;
        }

        #titulo_row {
            background-image: url("./header.jpg");
            background-repeat: no-repeat;
            background-position: 50% calc(10% - 100px);
            background-size: cover;
            min-height: 100px;
            min-width: 100%;
            position: relative;

        }

        #opacidad_row {
            opacity: 0.6;
            background-color: #2857ce;
            height: 100%;
            width: 100%;
            position: absolute;

        }

        #contenedor_busqueda,
        #contenedor_rows {
            max-width: 300px;
            min-width: 300px;
            height: fit-content;
        }

        #contenedor_rows {
            display: none;
        }

        #contenedor_busqueda {}

        #error {
            display: none;
        }

        select {
            width: 100%;
            border-color: #203461;
            color: #203461;
            height: 30px;
            font-family: 'Karla', sans-serif;
        }

        #stage_id_2>text {

            font-size: 14pt;
            font-weight: bold;
            text-align: left;
        }

        input[type=text] {
            border-color: #203461;
            color: #203461;
            border-width: 1px;
            height: 31px;
            width: 100%;
            font-family: 'Karla', sans-serif;
            padding: 3px;
            padding-left: 5px;
            box-sizing: border-box;

        }

        textarea {

            border-color: #203461;
            color: #203461;
            width: 100%;
            box-sizing: border-box;
            margin: 0px;
            height: 100px;
            resize: vertical;
            font-family: 'Karla', sans-serif;
            padding: 5px;

        }

        #descripcion_row {
            width: 100%;

        }

        .refresh {
            border: 1px solid #203461;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            color: #203461;
            right: -10px;
            transform: translate(100%);
            position: absolute;
            cursor: pointer;
            font-size: auto;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;

        }

        .refresh:hover {
            transform: scale(1.1) translate(100%);
        }

        .refresh:active {
            transform: scale(0.9) translate(100%);
        }

        .boton:hover {
            transform: scale(1.1);
        }

        .boton:active {
            transform: scale(0.9);
        }

        .boton {
            border: 1px solid;
            width: 120px;
            height: 30px;
            margin: 10px;
            background-color: #0066fe;
            color: white;
            cursor: pointer;
            font-size: auto;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #boton_regresar {}

        .row_space {
            margin-top: 20px;
        }

        #logo {
            margin: 20px;
            width: 270px;
        }

        .relative {
            position: relative;
        }

        .links {
            font-size: 10pt;
            color: #0066fe;
            text-decoration: underline;
            cursor: pointer;
        }

        #name_2>text {
            font-size: 20pt;
            text-decoration: underline;
            margin-top: 5px;
            margin-bottom: 5px;
        }

        #stage_id_2 {
            position: relative;
        }

        #stage_id_2>text {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        #titulo_tiquete {
            font-size: 14pt;
            font-weight: bold;
            text-align: center;


        }

        #contenedor_info_tiquete>div, 
        #contenedor_basico_tiquete>div {
            margin-top: 6px;

        }

        #contenedor_busqueda>div {
            margin-top: 10px;
        }


        #caja_descrip {
            margin: 20px;
            margin-left: 0px;
            margin-right: 0px;
        }

        #submit_row {
            margin-top: 10px;
        }
    </style>

</head>

<body class="noselect">
    <div id="ayuda" class="rows">
        <div id="logo_row">
            <svg version="1.1" id="logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                x="0px" y="0px" viewBox="0 0 242.198 75.5" style="enable-background:new 0 0 242.198 75.5;"
                xml:space="preserve">
                <g id="XMLID_20_">
                    <g id="XMLID_53_">
                        <g id="XMLID_54_">
                            <path id="XMLID_81_" style="fill: #0066FE;" d="M71.792,71.167h-8.75c-0.758,0-1.375-0.617-1.375-1.375v-26.75
                            c0-0.758,0.617-1.375,1.375-1.375h8.75c0.758,0,1.375,0.617,1.375,1.375v26.75C73.167,70.549,72.549,71.167,71.792,71.167z
                             M63.167,69.667h8.5v-26.5h-8.5V69.667z" />
                        </g>
                    </g>
                    <g id="XMLID_51_">
                        <g id="XMLID_52_">
                            <path id="XMLID_78_" style="fill: #0066FE;"
                                d="M67.119,40.123c-0.381,0-0.763-0.146-1.053-0.436l-6.026-6.026
                            c-0.581-0.58-0.581-1.525,0-2.105l6.026-6.025c0.58-0.58,1.525-0.58,2.105,0l6.026,6.026c0.581,0.58,0.581,1.525,0,2.105
                            l-6.026,6.025C67.882,39.977,67.5,40.123,67.119,40.123z M67.111,26.59L61.1,32.616l6.019,6.003l6.019-6.018L67.111,26.59z" />
                        </g>
                    </g>
                    <g id="XMLID_49_">
                        <g id="XMLID_50_">
                            <path id="XMLID_75_" style="fill: #0066FE;" d="M115.593,71.201h-8.604c-0.799,0-1.448-0.649-1.448-1.448V53.177l-16.022,0.052
                            c-0.354,0-0.685,0.192-0.861,0.503c-1.365,2.395-1.074,3.917-0.218,5.467c0.133,0.241,0.56,0.486,0.845,0.486h13.559
                            c0.799,0,1.448,0.649,1.448,1.448v8.604c0,0.799-0.649,1.448-1.448,1.448H87.536c-2.352,0-5.38-1.45-6.75-3.232
                            c-5.814-7.56-5.748-15.774,0.188-23.131c1.586-1.966,4.013-3.093,6.658-3.093h27.962c0.799,0,1.448,0.649,1.448,1.448v26.575
                            C117.042,70.551,116.392,71.201,115.593,71.201z M89.519,51.729h16.074c0.799,0,1.448,0.649,1.448,1.448v16.575l8.5-0.052V43.177
                            l-27.91,0.052c-2.189,0-4.19,0.924-5.49,2.534c-5.457,6.765-5.517,14.319-0.166,21.275c1.103,1.435,3.649,2.646,5.561,2.646
                            h15.308l-0.052-8.552l-13.507,0.052c-0.833,0-1.761-0.542-2.157-1.261c-1.286-2.326-1.219-4.4,0.228-6.936
                            C87.799,52.212,88.628,51.729,89.519,51.729z" />
                        </g>
                    </g>
                    <g id="XMLID_47_">
                        <g id="XMLID_48_">
                            <path id="XMLID_72_" style="fill: #0066FE;"
                                d="M213.392,70.948h-3.194c-0.498,0-0.902-0.405-0.902-0.903V58.09h-7.902
                            c-0.154,0-0.3,0.078-0.371,0.199c-1.451,2.491-1.498,5.285-0.123,7.473c0.069,0.11,0.207,0.18,0.358,0.18h6.698
                            c0.498,0,0.903,0.405,0.903,0.903v3.193c0,0.498-0.405,0.903-0.903,0.903h-7.431c-1.268,0-2.456-0.604-3.26-1.655
                            c-3.147-4.12-3.163-9.749-0.04-14.343c0.788-1.16,2.06-1.854,3.401-1.854h12.766c0.498,0,0.903,0.405,0.903,0.903v16.052
                            C214.296,70.543,213.89,70.948,213.392,70.948z M210.296,69.948h3V54.09h-12.669c-1.01,0-1.973,0.529-2.574,1.416
                            c-2.877,4.23-2.874,9.401,0.008,13.173c0.613,0.803,1.512,1.263,2.465,1.263h7.334v-3h-6.602c-0.493,0-0.955-0.248-1.206-0.648
                            c-1.575-2.508-1.535-5.688,0.107-8.508c0.25-0.429,0.723-0.695,1.234-0.695h7.999c0.498,0,0.903,0.405,0.903,0.902V69.948z" />
                        </g>
                    </g>
                    <g id="XMLID_46_">
                        <path id="XMLID_69_" style="fill: #0066FE;" d="M164.469,71.229h-12.056c-0.506,0-0.997-0.183-1.381-0.514l-7.518-6.519l-7.42,6.517
                        c-0.386,0.333-0.877,0.516-1.383,0.516h-12.056c-0.787,0-1.428-0.641-1.428-1.428v-8.645c0-0.787,0.641-1.428,1.428-1.428h8.303
                        c0.16,0,0.314-0.058,0.436-0.162l3.39-2.938l-3.806-3.3c-0.121-0.104-0.275-0.162-0.436-0.162h-7.887
                        c-0.787,0-1.428-0.641-1.428-1.428v-8.645c0-0.787,0.641-1.428,1.428-1.428h11.638c0.506,0,0.997,0.183,1.382,0.514l7.933,6.88
                        l7.837-6.878c0.386-0.333,0.877-0.516,1.383-0.516h11.641c0.787,0,1.427,0.641,1.427,1.428v8.645c0,0.787-0.64,1.428-1.427,1.428
                        h-7.889c-0.159,0-0.313,0.058-0.435,0.162l-3.806,3.3l3.389,2.938c0.121,0.104,0.275,0.162,0.436,0.162h8.305
                        c0.787,0,1.427,0.641,1.427,1.428v8.645C165.896,70.589,165.257,71.229,164.469,71.229z M143.562,62.717
                        c0.334,0,0.669,0.115,0.936,0.346l7.516,6.518c0.11,0.095,0.254,0.148,0.4,0.148h11.982v-8.5h-8.231
                        c-0.521,0-1.024-0.188-1.418-0.529l-3.452-2.993c-0.313-0.27-0.492-0.662-0.492-1.076c-0.001-0.415,0.179-0.809,0.491-1.08
                        l3.87-3.354c0.394-0.342,0.896-0.529,1.417-0.529h7.815v-8.5h-11.567c-0.146,0-0.29,0.054-0.401,0.15l-7.931,6.876
                        c-0.533,0.462-1.337,0.463-1.87,0.001l-7.932-6.879c-0.11-0.095-0.254-0.148-0.4-0.148h-11.565v8.5h7.814
                        c0.521,0,1.024,0.188,1.418,0.529l3.869,3.354c0.313,0.27,0.492,0.662,0.492,1.076c0.001,0.415-0.179,0.809-0.491,1.08
                        l-3.454,2.993c-0.394,0.342-0.897,0.529-1.418,0.529h-8.23v8.5h11.983c0.146,0,0.29-0.054,0.402-0.15l7.514-6.515
                        C142.894,62.833,143.228,62.717,143.562,62.717z" />
                    </g>
                    <g id="XMLID_38_">
                        <g id="XMLID_45_">
                            <path id="XMLID_66_" style="fill: #0066FE;" d="M191.355,70.885c-0.223,0-0.432-0.087-0.588-0.245l-2.359-2.359
                            c-0.322-0.325-0.322-0.851-0.001-1.175l2.361-2.36c0.312-0.315,0.863-0.314,1.176,0.001l2.359,2.359
                            c0.322,0.325,0.322,0.851,0.001,1.175l-2.361,2.36C191.788,70.799,191.579,70.885,191.355,70.885z M189.234,67.693l2.122,2.121
                            l2.121-2.12l-2.122-2.121L189.234,67.693z" />
                        </g>
                    </g>
                    <g id="XMLID_36_">
                        <g id="XMLID_37_">
                            <path id="XMLID_63_" style="fill: #0066FE;" d="M218.569,70.885c-0.222,0-0.431-0.087-0.588-0.244l-2.36-2.36
                            c-0.157-0.157-0.244-0.366-0.244-0.588s0.087-0.431,0.244-0.588l2.359-2.359c0.314-0.314,0.861-0.314,1.176,0l2.36,2.36
                            c0.157,0.157,0.244,0.366,0.244,0.588s-0.087,0.431-0.244,0.588l-2.359,2.359C219,70.799,218.791,70.885,218.569,70.885z
                             M216.447,67.693l2.122,2.122l2.121-2.121l-2.122-2.122L216.447,67.693z" />
                        </g>
                    </g>
                    <rect id="XMLID_35_" x="0.417" y="0.417" style="fill: #0066FE;" width="55" height="74.75" />
                    <g id="XMLID_27_">
                        <path id="XMLID_60_" style="fill: #0066FE;" d="M182.576,70.954h-13.418c-0.48,0-0.872-0.392-0.872-0.872v-3.256
                        c0-0.48,0.392-0.872,0.872-0.872h13.065c0.657-1.232,0.443-1.989,0.109-2.562h-9.552c-1.468,0-2.816-0.706-3.608-1.89
                        c-1.449-2.171-1.467-4.184-0.058-6.526c0.775-1.289,2.209-2.09,3.741-2.09h12.464c0.48,0,0.872,0.392,0.872,0.872v3.256
                        c0,0.48-0.392,0.872-0.872,0.872h-12.122c-0.081,0.166-0.086,0.313-0.02,0.513l9.484-0.007c1.441,0,2.788,0.7,3.602,1.873l0,0
                        c1.299,1.874,2.354,4.9,0.003,8.68C185.495,70.183,184.081,70.954,182.576,70.954z M169.286,69.954h13.29
                        c1.162,0,2.251-0.59,2.842-1.539c2.065-3.317,1.153-5.953,0.024-7.58l0,0c-0.626-0.904-1.665-1.443-2.779-1.443h-9.731
                        c-0.262-0.038-0.412-0.13-0.521-0.272l-0.054-0.09c-0.238-0.51-0.408-1.133,0.131-1.896l0.096-0.102
                        c0.099-0.079,0.217-0.127,0.35-0.143l12.259-0.004v-3h-12.336c-1.184,0-2.288,0.615-2.884,1.605
                        c-1.216,2.021-1.206,3.601,0.032,5.455c0.605,0.904,1.644,1.445,2.776,1.445h9.651c0.284,0,0.551,0.147,0.697,0.386
                        c0.454,0.73,0.941,1.916-0.081,3.751c-0.144,0.259-0.428,0.426-0.723,0.426h-13.04V69.954z" />
                    </g>
                    <g id="XMLID_24_">
                        <path id="XMLID_57_" style="fill: #0066FE;" d="M236.942,70.954h-13.418c-0.48,0-0.872-0.392-0.872-0.872v-3.256
                        c0-0.48,0.392-0.872,0.872-0.872h13.066c0.656-1.231,0.442-1.989,0.109-2.562h-9.553c-1.468,0-2.816-0.706-3.608-1.89
                        c-1.449-2.171-1.467-4.184-0.058-6.526c0.775-1.289,2.209-2.09,3.741-2.09h12.464c0.48,0,0.872,0.392,0.872,0.872v3.256
                        c0,0.48-0.392,0.872-0.872,0.872h-12.121c-0.081,0.166-0.087,0.313-0.02,0.513l9.483-0.007c1.441,0,2.788,0.7,3.602,1.873l0,0
                        c1.3,1.873,2.355,4.898,0.004,8.679C239.862,70.183,238.447,70.954,236.942,70.954z M223.652,69.954h13.29
                        c1.163,0,2.252-0.59,2.843-1.539c2.064-3.318,1.152-5.954,0.023-7.58l0,0c-0.626-0.904-1.665-1.443-2.779-1.443h-9.73
                        c-0.265-0.038-0.417-0.132-0.524-0.278c-0.288-0.593-0.46-1.217,0.081-1.979l0.088-0.095c0.098-0.082,0.221-0.133,0.355-0.149
                        l12.26-0.004v-3h-12.336c-1.184,0-2.288,0.615-2.884,1.605c-1.216,2.021-1.206,3.601,0.032,5.455
                        c0.605,0.904,1.644,1.445,2.776,1.445h9.652c0.284,0,0.552,0.147,0.697,0.386c0.454,0.731,0.94,1.918-0.081,3.751
                        c-0.144,0.259-0.428,0.426-0.723,0.426h-13.041V69.954z" />
                    </g>
                    <g id="XMLID_55_">
                        <g id="XMLID_88_">
                            <g id="XMLID_89_">
                                <path id="XMLID_90_" style="fill: #FFFFFF;" d="M49.792,71.167H17.134c-3.419,0-6.635-1.801-8.391-4.699
                                c-5.707-9.43-5.681-18.648,0.076-27.401c1.812-2.755,4.878-4.399,8.202-4.399h17.77c0.758,0,1.375,0.617,1.375,1.375v8.75
                                c0,0.758-0.617,1.375-1.375,1.375H19.06c-0.709,0-1.371,0.402-1.687,1.024c-1.907,3.76-1.858,7.279,0.16,11.411
                                c0.316,0.646,0.986,1.064,1.706,1.064h20.427V9.042c0-0.758,0.617-1.375,1.375-1.375h8.75c0.758,0,1.375,0.617,1.375,1.375
                                v60.75C51.167,70.549,50.549,71.167,49.792,71.167z M17.022,36.167c-2.817,0-5.415,1.392-6.948,3.724
                                c-5.413,8.228-5.429,16.908-0.047,25.8c1.486,2.453,4.209,3.977,7.107,3.977h32.532v-60.5h-8.5v50.625
                                c0,0.758-0.617,1.375-1.375,1.375H19.24c-1.289,0-2.487-0.748-3.054-1.905c-2.215-4.535-2.263-8.585-0.15-12.749
                                c0.569-1.121,1.756-1.846,3.024-1.846h15.606v-8.5H17.022z" />
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
        </div>
        <div id="titulo_row" class="center">
            <div id="opacidad_row"></div>
            <h1>Centro de Ayuda</h1>
        </div>
        <div id="error" class="descripciones">
            <text>Error de conección a la API. Contáctate con soporte.</text>
        </div>
        <div id="contenedor_rows">
            <div class="descripciones instrucciones">
                <text>Ingresa tu nombre junto con el equipo que deseas crear la petición.</text>

            </div>
            <text id="link_tiquete" class="links">Haz click para consultar tiquete.</text>
            <div id="empleado_row" class="rows">
                <div>
                    <h2>Empleado:</h2>
                </div>
                <div class="columns center left relative">
                    <select id="employee_id">
                        <option value="">Nombre</option>
                    </select>
                    <div class="refresh">
                        <text>&#x21bb;</text>
                    </div>
                </div>
            </div>
            <div id="equipo_row" class="rows">
                <div>
                    <h2>Equipo:</h2>
                </div>
                <div class="columns center left relative">
                    <select id="equipment_id">
                        <option value="">Equipo</option>
                    </select>
                    <div class="refresh">
                        <text>&#x21bb;</text>
                    </div>
                </div>
            </div>
            <div id="prioridad_row" class="columns center left">
                <div>
                    <h2>Prioridad:</h2>
                </div>
                <div id="espacio_slide">
                    <input type="range" min="1" max="3" value="1" id="priority">
                </div>
            </div>
            <div id="tema_row" class="rows left">
                <div>
                    <h2>Titulo:</h2>
                </div>
                <input type="text" id="name" placeholder="Asunto">
            </div>
            <div id="descripcion_row">
                <div>
                    <h2>Descripción:</h2>
                </div>
                <textarea id="description" class="left" placeholder="Escribe el problema..."></textarea>
            </div>
            <div id="submit_row" class="center">
                <div id="submit" class="boton">
                    <text>Enviar</text>
                </div>
            </div>
        </div>
        <div id="contenedor_busqueda">
            <div id="caja_descrip">
                <div id="desc_busqueda_tiq" class="descripciones instrucciones">
                    <text>Ingresa el numero del tiquete para revisar su estado.</text>

                </div>
                <text id="link_regresar" class="links">Haz click para crear tiquete nuevo.</text>
            </div>
            <div id="input_tiquete">
                <h2>Numero del tiquete:</h2>
                <input type="Text" placeholder="Numero" />
            </div>
            <div class="center">
                <div id="boton_buscar" class="boton">
                    <text>Buscar</text>
                </div>
            </div>
            <div id="contenedor_info_tiquete">
                <div id="name_2" class="rows">
                    <h2>Numero de Tiquete:</h2>
                    <text>000000</text>
                </div>
                <div id="contenedor_basico_tiquete">
                    <div id="titulo_tiquete">
                        <Text>Contruccion de pieza para extractor</Text>
                    </div>
                    <div id="employee_id_2" class="columns">
                        <h2>Empleado:</h2>
                        <text>Empleado</text>

                    </div>
                    <div id="equipment_id_2" class="columns">
                        <h2>Equipo:</h2>
                        <text>Equipo</text>

                    </div>
                    <div id="encargado_id_2" class="columns">
                        <h2>Encargado:</h2>
                        <text>Encargado</text>

                    </div>
                </div>
                <div id="stage_id_2" class="columns">
                    <h2>Estado:</h2>
                    <text>Estado</text>

                </div>
                <div id="schedule_date_2" class="columns">
                    <h2>Fecha Prevista:</h2>
                    <text>00/00/0000 00:00:00</text>

                </div>
            </div>
        </div>
    </div>

    <script>
        /*
        async function getMaintenance() {
            try {
                const response = await fetch("https://api.diax.com.co/getodoomaintenanceinfo", {
                    method: "GET",
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',
                    }
                });
                const myJson = await response.json();
                if (response.status != 200) {

                    $("#error").show();
                    $("#contenedor_rows").hide();
                    alert("Error0 (Error de coneccion con la API): " + myJson);
                } else {
                    _mantenimiento = JSON.parse(myJson.body);
                    localStorage.setItem('_mantenimiento', JSON.stringify(_mantenimiento));
                    enablePage();
                }
            } catch (e) {
                $("#error").show();
                $("#contenedor_rows").hide();
                alert("Error1: " + e);
            }
        }

        try {
            var _mantenimiento = JSON.parse(localStorage.getItem('_mantenimiento'));
        } catch (e) {
            localStorage.setItem('_mantenimiento', "");
            var _mantenimiento = {};
        }
        if (_mantenimiento == null)
            getMaintenance();
        else
            enablePage();

        var trys = 0;

        function enablePage() {
            try {
                _mantenimiento.employees.forEach(element => {
                    $('#employee_id').append($('<option>', {
                        value: element.id,
                        text: element.resource_id[1]
                    }));
                });
                _mantenimiento.equipment.forEach(element => {
                    $('#equipment_id').append($('<option>', {
                        value: element.id,
                        text: element.name
                    }));
                });
                $("#error").hide();
                $("#contenedor_rows").show();
            } catch (e) {
                if (trys == 0) {
                    trys++;
                    getMaintenance();
                } else {
                    $("#error").show();
                    $("#contenedor_rows").hide();
                    alert("Error2: " + e);
                }
            }
        }

        $("#refresh").click(function (e) {

            $('#employee_id').empty();
            $('#equipment_id').empty();
            $('#employee_id').append($('<option>', {
                value: "",
                text: "Empleado"
            }));
            $('#equipment_id').append($('<option>', {
                value: "",
                text: "Equipo"
            }));

            localStorage.setItem('_mantenimiento', "");
            var _mantenimiento = {};
            getMaintenance();
        });

        $("#submit").click(function (e) {
            e.preventDefault(); //stop the browser from following

            $("#name").prop("disabled", true);
            $("#description").prop("disabled", true);
            $("#priority").prop("disabled", true);
            $("#equipment_id").prop("disabled", true);
            $("#employee_id").prop("disabled", true);
            $("#submit").hide();

            function reenable() {

                $("#name").prop("disabled", false);
                $("#description").prop("disabled", false);
                $("#priority").prop("disabled", false);
                $("#equipment_id").prop("disabled", false);
                $("#employee_id").prop("disabled", false);
                $("#submit").show();
            }
            var team = 2;
            _mantenimiento.equipment.forEach(element => {
                if (element.id == $('#equipment_id').val()) {
                    if (element.category_id[0] == "8") {
                        team = 3;
                    }
                    return;
                }
            });
            try {
                if (
                    $("#priority").val() == "" ||
                    $("#priority").val() == null ||
                    $("#employee_id").val() == "" ||
                    $("#employee_id").val() == null ||
                    $("#equipment_id").val() == "" ||
                    $("#equipment_id").val() == null
                ) {
                    alert("Faltan campos por llenar");
                    reenable();
                    return;
                }
                var _name = $("#name").val()
                if (
                    _name == "" ||
                    _name == null) {
                    _name = "Petición API";
                }

                var d = new Date();
                var datestring = d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d
                        .getDate()).slice(-2) +
                    " " + ("0" + d.getHours()).slice(-2) + ":" + ("0" + d.getMinutes()).slice(-2) + ":00";
                var _form = {
                    "name": $("#name").val(),
                    "description": $("#description").val(),
                    "priority": $("#priority").val(),
                    "schedule_date": datestring,
                    "maintenance_type": "corrective",
                    "employee_id": parseInt($("#employee_id").val()),
                    "equipment_id": parseInt($("#equipment_id").val()),
                    "maintenance_team_id": team
                };
                async function subscribe(_res) {
                    try {
                        const response = await fetch(
                            "https://api.diax.com.co/createodoomaintenancerequest", {
                                method: "POST",
                                headers: {},
                                body: JSON.stringify(_res)
                            });

                        const myJson = await response.json(); //extract JSON from the http response
                        // do something with myJson
                        if (myJson.statusCode != 200) {
                            $("#error").show();
                            $("#contenedor_rows").hide();
                            alert("Error3 (Error de conexión con la API): " + myJson["body"]);
                        } else {
                            $("#name").val("Petición API")
                            $("#description").val("Petición de Ayuda")
                            $("#priority").val("1")
                            $("#employee_id").val("")
                            $("#equipment_id").val("")
                            alert("Tiquete creado exitosamente: " + myJson["body"]);
                            reenable();
                        }
                    } catch (e) {
                        $("#error").show();
                        $("#contenedor_rows").hide();
                        alert("Error4: " + e);
                    }
                }
                subscribe(_form);
            } catch (e) {
                $("#error").show();
                $("#contenedor_rows").hide();
                alert("Error5: " + e);
            }
        });*/
    </script>
</body>

</html>